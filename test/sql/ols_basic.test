# name: test/sql/ols_basic.test
# description: Basic OLS regression tests
# group: [sql]

require anofox_statistics

# Basic OLS fit with simple linear relationship y = 2x + 1
query I
SELECT (anofox_stats_ols_fit([3.0, 5.0, 7.0, 9.0, 11.0], [[1.0, 2.0, 3.0, 4.0, 5.0]])).r_squared > 0.99;
----
true

# Check coefficient
query I
SELECT abs((anofox_stats_ols_fit([3.0, 5.0, 7.0, 9.0, 11.0], [[1.0, 2.0, 3.0, 4.0, 5.0]])).coefficients[1] - 2.0) < 0.01;
----
true

# Check intercept
query I
SELECT abs((anofox_stats_ols_fit([3.0, 5.0, 7.0, 9.0, 11.0], [[1.0, 2.0, 3.0, 4.0, 5.0]])).intercept - 1.0) < 0.01;
----
true
